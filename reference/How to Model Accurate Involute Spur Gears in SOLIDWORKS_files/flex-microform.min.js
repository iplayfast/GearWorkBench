/*!
 * Flex Microform v2.7.2
 * @copyright CyberSource 2016-2025
 */
!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var r=e();for(var n in r)("object"==typeof exports?exports:t)[n]=r[n]}}(self,(function(){return function(){var t={43:function(t,e,r){var n=r(6624),o=r(7367),i=r(2050),a=Function.prototype,u=Object.prototype,c=a.toString,s=u.hasOwnProperty,f=c.call(Object);t.exports=function(t){if(!i(t)||"[object Object]"!=n(t))return!1;var e=o(t);if(null===e)return!0;var r=s.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&c.call(r)==f}},581:function(t,e,r){var n=r(7384),o=r(4238),i=r(2329),a=r(4037),u=r(3613);function c(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}c.prototype.clear=n,c.prototype.delete=o,c.prototype.get=i,c.prototype.has=a,c.prototype.set=u,t.exports=c},677:function(t){t.exports=function(t,e){return null!=t&&e in Object(t)}},683:function(t,e,r){var n=r(1176),o=r(2864),i=Object.prototype.hasOwnProperty;t.exports=function(t,e,r){var a=t[e];i.call(t,e)&&o(a,r)&&(void 0!==r||e in t)||n(t,e,r)}},715:function(t){var e=Date.now;t.exports=function(t){var r=0,n=0;return function(){var o=e(),i=16-(o-n);if(n=o,i>0){if(++r>=800)return arguments[0]}else r=0;return t.apply(void 0,arguments)}}},764:function(t){t.exports=function(t,e){for(var r=-1,n=null==t?0:t.length,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}},951:function(t){t.exports=function(t,e){return function(r){return t(e(r))}}},1176:function(t,e,r){var n=r(8835);t.exports=function(t,e,r){"__proto__"==e&&n?n(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}},1187:function(t,e,r){var n=r(1330),o=r(1992),i=r(7717),a=r(1513),u=/^\[object .+?Constructor\]$/,c=Function.prototype,s=Object.prototype,f=c.toString,l=s.hasOwnProperty,p=RegExp("^"+f.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!i(t)||o(t))&&(n(t)?p:u).test(a(t))}},1330:function(t,e,r){var n=r(6624),o=r(7717);t.exports=function(t){if(!o(t))return!1;var e=n(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},1379:function(t,e,r){var n=r(8802);t.exports=function(t,e){var r=t.__data__;return n(e)?r["string"==typeof e?"string":"hash"]:r.map}},1513:function(t){var e=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return e.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},1577:function(t,e,r){var n=r(5418),o=r(715)(n);t.exports=o},1922:function(t,e,r){var n=r(6521),o=r(6770),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.exports=function(t,e){if(n(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!o(t))||(a.test(t)||!i.test(t)||null!=e&&t in Object(e))}},1992:function(t,e,r){var n,o=r(2353),i=(n=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";t.exports=function(t){return!!i&&i in t}},2008:function(t,e,r){var n=r(2961),o=Array.prototype.splice;t.exports=function(t){var e=this.__data__,r=n(e,t);return!(r<0)&&(r==e.length-1?e.pop():o.call(e,r,1),--this.size,!0)}},2050:function(t){t.exports=function(t){return null!=t&&"object"==typeof t}},2229:function(t,e,r){var n=r(3752),o=r(9886),i=r(6969),a=r(5989),u=r(3485);function c(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}c.prototype.clear=n,c.prototype.delete=o,c.prototype.get=i,c.prototype.has=a,c.prototype.set=u,t.exports=c},2310:function(t,e,r){var n=r(1187),o=r(3584);t.exports=function(t,e){var r=o(t,e);return n(r)?r:void 0}},2329:function(t,e,r){var n=r(7946),o=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(n){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return o.call(e,t)?e[t]:void 0}},2353:function(t,e,r){var n=r(8453)["__core-js_shared__"];t.exports=n},2424:function(t){t.exports=function(t){return t}},2582:function(t,e,r){var n=r(9041),o=r(7901);t.exports=function(t,e){for(var r=0,i=(e=n(e,t)).length;null!=t&&r<i;)t=t[o(e[r++])];return r&&r==i?t:void 0}},2715:function(t,e,r){var n=r(2961);t.exports=function(t){var e=this.__data__,r=n(e,t);return r<0?void 0:e[r][1]}},2753:function(t){var e=/^(?:0|[1-9]\d*)$/;t.exports=function(t,r){var n=typeof t;return!!(r=null==r?9007199254740991:r)&&("number"==n||"symbol"!=n&&e.test(t))&&t>-1&&t%1==0&&t<r}},2839:function(t,e,r){var n=r(3614),o=r(2008),i=r(2715),a=r(5655),u=r(8383);function c(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}c.prototype.clear=n,c.prototype.delete=o,c.prototype.get=i,c.prototype.has=a,c.prototype.set=u,t.exports=c},2864:function(t){t.exports=function(t,e){return t===e||t!=t&&e!=e}},2874:function(t,e,r){var n=r(3880);t.exports=function(t){return(null==t?0:t.length)?n(t,1):[]}},2961:function(t,e,r){var n=r(2864);t.exports=function(t,e){for(var r=t.length;r--;)if(n(t[r][0],e))return r;return-1}},3016:function(t,e,r){var n=r(2874),o=r(4525),i=r(1577);t.exports=function(t){return i(o(t,void 0,n),t+"")}},3439:function(t,e,r){var n=r(677),o=r(6998);t.exports=function(t,e){return null!=t&&o(t,e,n)}},3485:function(t,e,r){var n=r(1379);t.exports=function(t,e){var r=n(this,t),o=r.size;return r.set(t,e),this.size+=r.size==o?0:1,this}},3486:function(t){t.exports=function(t){return function(){return t}}},3584:function(t){t.exports=function(t,e){return null==t?void 0:t[e]}},3613:function(t,e,r){var n=r(7946);t.exports=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=n&&void 0===e?"__lodash_hash_undefined__":e,this}},3614:function(t){t.exports=function(){this.__data__=[],this.size=0}},3752:function(t,e,r){var n=r(581),o=r(2839),i=r(6615);t.exports=function(){this.size=0,this.__data__={hash:new n,map:new(i||o),string:new n}}},3880:function(t,e,r){var n=r(9512),o=r(8923);t.exports=function t(e,r,i,a,u){var c=-1,s=e.length;for(i||(i=o),u||(u=[]);++c<s;){var f=e[c];r>0&&i(f)?r>1?t(f,r-1,i,a,u):n(u,f):a||(u[u.length]=f)}return u}},4037:function(t,e,r){var n=r(7946),o=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return n?void 0!==e[t]:o.call(e,t)}},4059:function(t){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var e=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(t){n[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(t){return!1}}()?Object.assign:function(t,o){for(var i,a,u=function(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),c=1;c<arguments.length;c++){for(var s in i=Object(arguments[c]))r.call(i,s)&&(u[s]=i[s]);if(e){a=e(i);for(var f=0;f<a.length;f++)n.call(i,a[f])&&(u[a[f]]=i[a[f]])}}return u}},4073:function(t,e,r){var n=r(8453).Symbol;t.exports=n},4238:function(t){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},4239:function(t,e,r){var n=r(6624),o=r(6521),i=r(2050);t.exports=function(t){return"string"==typeof t||!o(t)&&i(t)&&"[object String]"==n(t)}},4478:function(t){var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},4525:function(t,e,r){var n=r(7057),o=Math.max;t.exports=function(t,e,r){return e=o(void 0===e?t.length-1:e,0),function(){for(var i=arguments,a=-1,u=o(i.length-e,0),c=Array(u);++a<u;)c[a]=i[e+a];a=-1;for(var s=Array(e+1);++a<e;)s[a]=i[a];return s[e]=r(c),n(t,this,s)}}},4928:function(t,e,r){var n=r(2229);function o(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var r=function(){var n=arguments,o=e?e.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=t.apply(this,n);return r.cache=i.set(o,a)||i,a};return r.cache=new(o.Cache||n),r}o.Cache=n,t.exports=o},5418:function(t,e,r){var n=r(3486),o=r(8835),i=r(2424),a=o?function(t,e){return o(t,"toString",{configurable:!0,enumerable:!1,value:n(e),writable:!0})}:i;t.exports=a},5465:function(t,e,r){var n=r(9140),o=r(3439);t.exports=function(t,e){return n(t,e,(function(e,r){return o(t,r)}))}},5655:function(t,e,r){var n=r(2961);t.exports=function(t){return n(this.__data__,t)>-1}},5794:function(t,e,r){var n=r(6360),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g,a=n((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(o,(function(t,r,n,o){e.push(n?o.replace(i,"$1"):r||t)})),e}));t.exports=a},5989:function(t,e,r){var n=r(1379);t.exports=function(t){return n(this,t).has(t)}},6356:function(t,e,r){var n=r(7382),o=r(2050),i=Object.prototype,a=i.hasOwnProperty,u=i.propertyIsEnumerable,c=n(function(){return arguments}())?n:function(t){return o(t)&&a.call(t,"callee")&&!u.call(t,"callee")};t.exports=c},6360:function(t,e,r){var n=r(4928);t.exports=function(t){var e=n(t,(function(t){return 500===r.size&&r.clear(),t})),r=e.cache;return e}},6521:function(t){var e=Array.isArray;t.exports=e},6615:function(t,e,r){var n=r(2310)(r(8453),"Map");t.exports=n},6624:function(t,e,r){var n=r(4073),o=r(7915),i=r(4478),a=n?n.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?o(t):i(t)}},6770:function(t,e,r){var n=r(6624),o=r(2050);t.exports=function(t){return"symbol"==typeof t||o(t)&&"[object Symbol]"==n(t)}},6969:function(t,e,r){var n=r(1379);t.exports=function(t){return n(this,t).get(t)}},6998:function(t,e,r){var n=r(9041),o=r(6356),i=r(6521),a=r(2753),u=r(9358),c=r(7901);t.exports=function(t,e,r){for(var s=-1,f=(e=n(e,t)).length,l=!1;++s<f;){var p=c(e[s]);if(!(l=null!=t&&r(t,p)))break;t=t[p]}return l||++s!=f?l:!!(f=null==t?0:t.length)&&u(f)&&a(p,f)&&(i(t)||o(t))}},7057:function(t){t.exports=function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}},7367:function(t,e,r){var n=r(951)(Object.getPrototypeOf,Object);t.exports=n},7382:function(t,e,r){var n=r(6624),o=r(2050);t.exports=function(t){return o(t)&&"[object Arguments]"==n(t)}},7384:function(t,e,r){var n=r(7946);t.exports=function(){this.__data__=n?n(null):{},this.size=0}},7717:function(t){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},7850:function(t,e,r){var n=r(683),o=r(9041),i=r(2753),a=r(7717),u=r(7901);t.exports=function(t,e,r,c){if(!a(t))return t;for(var s=-1,f=(e=o(e,t)).length,l=f-1,p=t;null!=p&&++s<f;){var d=u(e[s]),h=r;if("__proto__"===d||"constructor"===d||"prototype"===d)return t;if(s!=l){var v=p[d];void 0===(h=c?c(v,d,p):void 0)&&(h=a(v)?v:i(e[s+1])?[]:{})}n(p,d,h),p=p[d]}return t}},7901:function(t,e,r){var n=r(6770);t.exports=function(t){if("string"==typeof t||n(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},7915:function(t,e,r){var n=r(4073),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,u=n?n.toStringTag:void 0;t.exports=function(t){var e=i.call(t,u),r=t[u];try{t[u]=void 0;var n=!0}catch(t){}var o=a.call(t);return n&&(e?t[u]=r:delete t[u]),o}},7946:function(t,e,r){var n=r(2310)(Object,"create");t.exports=n},8382:function(t,e,r){var n=r(9020);t.exports=function(t){return null==t?"":n(t)}},8383:function(t,e,r){var n=r(2961);t.exports=function(t,e){var r=this.__data__,o=n(r,t);return o<0?(++this.size,r.push([t,e])):r[o][1]=e,this}},8453:function(t,e,r){var n=r(8928),o="object"==typeof self&&self&&self.Object===Object&&self,i=n||o||Function("return this")();t.exports=i},8791:function(t,e,r){var n=r(5465),o=r(3016)((function(t,e){return null==t?{}:n(t,e)}));t.exports=o},8802:function(t){t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},8835:function(t,e,r){var n=r(2310),o=function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=o},8923:function(t,e,r){var n=r(4073),o=r(6356),i=r(6521),a=n?n.isConcatSpreadable:void 0;t.exports=function(t){return i(t)||o(t)||!!(a&&t&&t[a])}},8928:function(t,e,r){var n="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;t.exports=n},9020:function(t,e,r){var n=r(4073),o=r(764),i=r(6521),a=r(6770),u=n?n.prototype:void 0,c=u?u.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(i(e))return o(e,t)+"";if(a(e))return c?c.call(e):"";var r=e+"";return"0"==r&&1/e==-1/0?"-0":r}},9041:function(t,e,r){var n=r(6521),o=r(1922),i=r(5794),a=r(8382);t.exports=function(t,e){return n(t)?t:o(t,e)?[t]:i(a(t))}},9140:function(t,e,r){var n=r(2582),o=r(7850),i=r(9041);t.exports=function(t,e,r){for(var a=-1,u=e.length,c={};++a<u;){var s=e[a],f=n(t,s);r(f,s)&&o(c,i(s,t),f)}return c}},9358:function(t){t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},9512:function(t){t.exports=function(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}},9886:function(t,e,r){var n=r(1379);t.exports=function(t){var e=n(this,t).delete(t);return this.size-=e?1:0,e}}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,r),i.exports}r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,{a:e}),e},r.d=function(t,e){for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var n={};return function(){"use strict";r.r(n),r.d(n,{Flex:function(){return dt}});var t=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!t.reason)throw new Error("Error reason required");if(!t.message)throw new Error("Error message required");this.name="MicroformError",this.reason=t.reason,this.message=t.message,this.informationLink=t.informationLink||"https://www.cybersource.com/products/payment_security/secure_acceptance",this.correlationId=t.correlationId,this.details=t.details};(t.prototype=Object.create(Error.prototype)).constructor=t;var e=t,o=function(){return new e({reason:"CAPTURE_CONTEXT_INVALID",message:"You have not supplied a valid capture context."})},i=function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return new e({reason:"CREATE_FIELD_INVALID_FIELD_TYPE",message:'Invalid field "'.concat(t,'" for Microform type "').concat(r,'". Supported values are [ ').concat(n.join(", ")," ]."),details:{message:"Supported values are [ ".concat(n.join(", ")," ].")}})},a=r(4239),u=r.n(a);function c(){return Math.random()}function s(t){return u()(t)&&/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}function f(t){return u()(t)&&/^([-\w]+\.){2}[-\w]+$/.test(t)}var l=/^mf-/;function p(t){var e,r=-1;try{if(!f(t))throw new Error;if(e=JSON.parse(function(t){try{return atob(t.replace(/-/g,"+").replace(/_/g,"/"))}catch(t){throw new Error("Failed to decode base64 string")}}(t.split(".")[1])),r=(e.ctx||[]).findIndex((function(t){return l.test(t.type)})),!e.jti||!e.flx.origin||!e.flx.jwk.kid||!Array.isArray(e.ctx)||r<0)throw new Error}catch(t){throw o()}var n,i=e.ctx[r].data,a=0===(n=i.allowedPaymentTypes||[]).length?new Set(["card"]):n.reduce((function(t,e){switch(e){case"CARD":t.add("card");break;case"CHECK":t.add("check");break;default:console.warn("Unknown allowed payment type [".concat(e,"]. Ignoring."))}return t}),new Set);if(a.size<1)throw o();return Object.freeze({jwt:t,keyId:e.flx.jwk.kid,origin:e.flx.origin,contents:i,microformTypes:a})}var d=r(8791),h=r.n(d),v=["number","securityCode"],y=["accountNumber","accountNumberConfirm","routingNumber"],b=r(1330),m=r.n(b);function g(t){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}function _(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={};return Object.keys(e).forEach((function(n){var o=e[n],i=t[n];if(void 0===i){if(o.required)throw new Error('Required parameter "'.concat(n,'" was not supplied'));if(void 0===o.default)return;i=o.default}if(g(i)!==o.type)throw function(t,e,r){return new Error('Invalid value typeof "'.concat(e,'" supplied for parameter "').concat(t,'". Expected typeof "').concat(r,'".'))}(n,g(i),o.type);if(o.supportedValues&&o.supportedValues.indexOf(i)<0)throw function(t,e,r){return new Error('Invalid value of "'.concat(e,'" for "').concat(t,'" parameter. Supported values are [').concat(r.join(", "),"]"))}(n,i,o.supportedValues);if(m()(o.expression)&&!0!==o.expression.call(null,i,t,e))throw function(t){return new Error('Failed expression evaluation for parameter "'.concat(t,'".'))}(n);r[n]=i})),r}var w=window.crypto||window.msCrypto;function x(){return null!=w&&w.randomUUID?w.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*c()|0;return("x"===t?e:3&e|8).toString(16)}))}var O=r(4059),j=r.n(O),S=["autocomplete","blur","change","error","focus","inputSubmitRequest","load","unload","update"];function E(t){return S.indexOf(t)>=0}var k=r(43),T=r.n(k);function A(t){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A(t)}function P(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,I(n.key),n)}}function I(t){var e=function(t,e){if("object"!=A(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=A(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==A(e)?e:e+""}var C="application/x-telegram+json",L="/*cybs-telgram*/",N=/^http(s)?:\/\/.+(:\d+)?$/,R=function(){return t=function t(e,r,n){var o,i,a;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,a={},(i=I(i="subscribers"))in o?Object.defineProperty(o,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[i]=a,!u()(r))throw new Error('Invalid channelName "'.concat(r,'"'));if(!N.test(n))throw new Error('Invalid origin "'.concat(n,'"'));this.target=e,this.channel=r,this.targetOrigin=n,this.subscribers={},this.listener=this.processMessage.bind(this),window.addEventListener("message",this.listener,!1)},e=[{key:"subscribe",value:function(t,e){return!(!u()(t)||!m()(e)||(this.subscribers[t]||(this.subscribers[t]=[]),this.subscribers[t].push(e),0))}},{key:"subscribeOnce",value:function(t,e){var r=this,n=function(o){r.unsubscribe(t,n),e(o)};return this.subscribe(t,n)}},{key:"unsubscribe",value:function(t,e){if(!u()(t)||!m()(e))return!1;if(!this.subscribers[t])return!1;for(var r=this.subscribers[t],n=0;n<r.length;n+=1)if(r[n]===e)return r.splice(n,1),!0;return!1}},{key:"unsubscribeAll",value:function(){return this.subscribers={},!0}},{key:"publish",value:function(t,e,r){var n=this.generatePayload(t,e,r);try{(this.target instanceof HTMLIFrameElement?this.target.contentWindow:this.target).postMessage(n,this.targetOrigin)}catch(t){throw new Error("Communication failed.")}}},{key:"teardown",value:function(){window.removeEventListener("message",this.listener,!1),this.listener=null,this.unsubscribeAll()}},{key:"autoReplySubscription",value:function(t){var e=this,r=x(),n=function(o){e.unsubscribe(r,n),t(o)};return this.subscribe(r,n),r}},{key:"generatePayload",value:function(t,e,r){var n={event:t,channel:this.channel,contentType:C,data:e||{}};return"function"==typeof r&&(n.reply=this.autoReplySubscription(r)),L+JSON.stringify(n)}},{key:"processMessage",value:function(t){if((t.origin||t.originalEvent.origin)===this.targetOrigin&&u()(t.data)&&0===t.data.indexOf(L)){var e;try{if(e=JSON.parse(t.data.substring(16)),!this.validateRecievedMessage(e))return}catch(t){return}var r=[e.data];e.reply&&r.push(this.autoReplyPublish(t,e.reply));for(var n=this.subscribers[e.event].length,o=0;o<n;o+=1)this.subscribers[e.event][o].apply(t,r)}}},{key:"validateRecievedMessage",value:function(t){return T()(t)&&t.contentType===C&&t.channel===this.channel&&u()(t.event)&&void 0!==this.subscribers[t.event]}},{key:"autoReplyPublish",value:function(t,e){var r=this;return function(n,o){var i=r.generatePayload(e,n,o);t.source.postMessage(i,t.origin)}}}],e&&P(t.prototype,e),r&&P(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}(),D=void 0!==document.location.ancestorOrigins,q={microformType:{type:"string",required:!0,supportedValues:["card","check"]},microformId:{type:"string",required:!0,expression:function(t){return s(t)}},fieldType:{type:"string",required:!0,expression:function(t,e){switch(e.microformType){case"card":return v.includes(t);case"check":return y.includes(t);default:return!1}}},fieldId:{type:"string",required:!0,expression:function(t){return s(t)}},jwt:{type:"string",required:!0,expression:function(t){return f(t)}},microformConfig:{type:"object",required:!1},config:{type:"object",required:!0}};D||(q.refererOrigin={type:"string",required:!1});var F=["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","object","embed","iframe","*[tabindex]","*[contenteditable]"].join(",");function M(t){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},M(t)}function U(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,z(n.key),n)}}function z(t){var e=function(t,e){if("object"!=M(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=M(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==M(e)?e:e+""}var V=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.topics={}},e=[{key:"subscribe",value:function(t,e){if(!m()(e))throw new Error("handler not a function.");return Object.prototype.hasOwnProperty.call(this.topics,t)||(this.topics[t]=[]),this.topics[t].push(e),this}},{key:"unsubscribe",value:function(t,e){if(!m()(e))throw new Error("handler not a function.");if(Object.prototype.hasOwnProperty.call(this.topics,t)){var r=this.topics[t].indexOf(e);r>=0&&this.topics[t].splice(r,1)}return this}},{key:"unsubscribeAll",value:function(){return this.topics={},this}},{key:"publish",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.prototype.hasOwnProperty.call(this.topics,t)&&this.topics[t].forEach((function(t){return t(e)})),this}}],e&&U(t.prototype,e),r&&U(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}(),$={base:"flex-microform",focused:"flex-microform-focused",valid:"flex-microform-valid",invalid:"flex-microform-invalid",incomplete:"flex-microform-incomplete",disabled:"flex-microform-disabled",autocomplete:"flex-microform-autocomplete"};function B(t){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},B(t)}function J(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Y(n.key),n)}}function Y(t){var e=function(t,e){if("object"!=B(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=B(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==B(e)?e:e+""}var K=Object.keys($).map((function(t){return $[t]})),H={placeholder:{type:"string",required:!1},title:{type:"string",required:!1},description:{type:"string",required:!1},"aria-label":{type:"string",required:!1},"aria-required":{type:"boolean",required:!1,default:!0},disabled:{type:"boolean",required:!1},styles:{type:"object",required:!1}},G=j()({},H,{autoformat:{type:"boolean",required:!1}}),W=j()({},H,{maxLength:{type:"number",required:!1,supportedValues:[3,4]}}),X="/microform/bundle/v".concat("2.7.2","/iframe.html");function Q(t,e,r,n,o,i,a){var u={microformType:t,microformId:r,microformConfig:o,fieldType:a,fieldId:n,config:i,jwt:e.jwt};void 0===document.location.ancestorOrigins&&(u.refererOrigin=window.location.origin);var c=document.createElement("iframe");c.setAttribute("hspace","0"),c.setAttribute("vspace","0"),c.setAttribute("frameborder","0"),c.setAttribute("scrolling","no"),c.setAttribute("allowtransparency","true"),c.setAttribute("marginwidth","0"),c.setAttribute("marginheight","0"),c.setAttribute("title","secure payment field"),c.style.overflow="hidden",c.style.position="relative",c.style.border="none",c.style.width="100%",c.style.height="100%";var s=function(t){return JSON.stringify(t)}(u);return c.setAttribute("src","".concat(e.origin).concat(X,"?keyId=").concat(e.keyId,"#").concat(s)),c}function Z(t,e,r){E(e)&&t.publish(e,r)}function tt(t,e,r,n){var o=this;e.subscribe("event_load",(function(t){return Z(r,"load",t)})),e.subscribe("event_focus",(function(){!function(){var t,e,r;if(window.getSelection&&null!==(t=window.getSelection())&&void 0!==t&&t.empty)null===(r=window.getSelection())||void 0===r||r.empty();else if(window.getSelection&&null!==(e=window.getSelection())&&void 0!==e&&e.removeAllRanges){var n;null===(n=window.getSelection())||void 0===n||n.removeAllRanges()}else document.selection&&document.selection.empty()}(),n.parentElement.classList.add($.focused),Z(r,"focus")})),e.subscribe("event_blur",(function(t){var e=t||{},o=e.tabDirection,i=e.incomplete;o&&function(t,e){var r;if(e&&("next"===e.focusShift||"previous"===e.focusShift)){var n=Array.prototype.slice.call(document.querySelectorAll(F)).filter((function(t){var e=t.getAttribute("tabindex"),r=t.getBoundingClientRect();return(!e||parseInt(e,10)>=0)&&(r.width>0&&r.height>0||"AREA"===t.tagName)})),o=n.indexOf(t)+("previous"===e.focusShift?-1:1);0<=o&&o<n.length&&(null===(r=n[o])||void 0===r||r.focus())}}(n,o);var a=n.parentElement;a&&(a.classList.remove($.focused),a.classList.toggle($.incomplete,!!i)),Z(r,"blur")})),e.subscribe("event_inputSubmitRequest",(function(){Z(r,"inputSubmitRequest")})),e.subscribe("event_change",(function(t){n.parentElement.classList.toggle($.incomplete,!t.valid&&t.couldBeValid),n.parentElement.classList.toggle($.invalid,!t.valid&&!t.couldBeValid),n.parentElement.classList.toggle($.valid,t.valid),Z(r,"change",t)})),e.subscribe("event_update",(function(t){j()(o._config,t),n.parentElement.classList.toggle($.disabled,t.disabled),Z(r,"update",t)})),e.subscribe("event_error",(function(t){Z(r,"error",t)})),"number"===t&&(e.subscribe("event_autocomplete",(function(t){n.parentElement.classList.add($.autocomplete),Z(r,"autocomplete",t)})),e.subscribe("internal_autocompleteEdit",(function(){n.parentElement.classList.remove($.autocomplete)})))}function et(t,e){switch(t){case"number":return _(e,G);case"securityCode":return _(e,W)}return y.indexOf(t)>=0?_(e,H):{}}var rt=function(){return t=function t(e,r,n,o,a){var u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};switch(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e){case"card":if(v.indexOf(o)<0)throw i(o,e,v);break;case"check":if(y.indexOf(o)<0)throw i(o,e,y);break;default:throw i(o,e,[])}this._microformType=e,this._type=o,this._config=et(this._type,u);var c=x();this._iframe=Q(this._microformType,r,n,c,a,this._config,o),this._telegram=new R(this._iframe,c,r.origin),this._pubSub=new V,this._container=null,this._loaded=!1,tt.call(this,o,this._telegram,this._pubSub,this._iframe)},(r=[{key:"clear",value:function(){!0===this._loaded&&this._telegram.publish("trigger_clear")}},{key:"dispose",value:function(){!0===this._loaded&&this.unload()}},{key:"focus",value:function(){!0===this._loaded&&this._telegram.publish("trigger_focus")}},{key:"blur",value:function(){!0===this._loaded&&this._telegram.publish("trigger_blur")}},{key:"on",value:function(t,r){if(!E(t))throw new e({reason:"FIELD_SUBSCRIBE_UNSUPPORTED_EVENT",message:"Unsupported event name."});if(!m()(r))throw new e({reason:"FIELD_SUBSCRIBE_INVALID_CALLBACK",message:"The supplied callback is not a function."});this._pubSub.subscribe(t,r)}},{key:"off",value:function(t,e){this._pubSub.unsubscribe(t,e)}},{key:"unload",value:function(){var t=this;if(!0!==this._loaded)throw new e({reason:"FIELD_UNLOAD_ERROR",message:'Field is not loaded. Call "load" before attempting to unload.'});if(this._loaded=!1,this._iframe.onload=null,this._container){for(;this._container.lastChild;)this._container.removeChild(this._container.lastChild);K.forEach((function(e){return t._container.classList.remove(e)})),this._container=null}Z(this._pubSub,"unload")}},{key:"update",value:function(t){var e=et(this._type,t);Object.keys(e).length<1||(j()(this._config,e),!0===this._loaded&&this._telegram.publish("trigger_update",e))}},{key:"load",value:function(t){var r=this;if(!0===this._loaded)throw new e({reason:"FIELD_ALREADY_LOADED",message:'Field has already been loaded. Call "unload" before trying to re-load.'});if(t instanceof Element)this._container=t;else{if("string"!=typeof t)throw new e({reason:"FIELD_LOAD_INVALID_CONTAINER",message:"Invalid argument supplied to load. Supported values are [HTMLElement or a CSS selector string]."});var n=document.querySelector(t);if(!n)throw new e({reason:"FIELD_LOAD_CONTAINER_SELECTOR",message:"Unable to locate a DOM node using the supplied selector string."});this._container=n}var o=function(t,e){try{var r=t.indexOf("#"),n=JSON.parse(t.substr(r+1));return j()(n.config,e),"".concat(t.substring(0,r),"#").concat(JSON.stringify(n))}catch(e){return t}}(this._iframe.getAttribute("src"),this._config);for(this._iframe.setAttribute("src",o);this._container.lastChild;)this._container.removeChild(this._container.lastChild);this._iframe.onload=function(){r._loaded=!0},this._container.appendChild(this._iframe),this._container.classList.add($.base)}}])&&J(t.prototype,r),n&&J(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}(),nt=rt;function ot(t){return ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ot(t)}function it(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,at(n.key),n)}}function at(t){var e=function(t,e){if("object"!=ot(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ot(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ot(e)?e:e+""}var ut={styles:{type:"object",required:!1,default:{}}},ct=function(){return t=function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),n=_(n,ut),this._flexConfig=e,this._microformId=x(),this._microformType=r,this._baseConfig={styles:n.styles},this.fields={}},r=[{key:"createField",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(this._microformType){case"card":if(v.indexOf(t)<0)throw i(t,this._microformType,v);break;case"check":if(y.indexOf(t)<0)throw i(t,this._microformType,y);break;default:throw i(t,this._microformType,[])}if(void 0!==this.fields[t])throw function(t){return new e({reason:"CREATE_FIELD_DUPLICATE",message:'A "'.concat(t,'" field has already been created for this integration.')})}(t);return this.fields[t]=new nt(this._microformType,this._flexConfig,this._microformId,t,this._baseConfig,r),this.fields[t]}},{key:"createToken",value:function(t,r){var n=this,o=[],i=[];if(Object.keys(this.fields).forEach((function(t){!0===n.fields[t]._loaded&&(o.push(t),i.push((function(e,r,o){n.fields[t]._telegram.publish(e,r,o)})))})),i.length<1)r(new e({reason:"CREATE_TOKEN_NO_FIELDS_LOADED",message:"No fields have been loaded."}));else{var a;switch(function(t){if(t instanceof Array&&t.length>0)for(var e,r,n=t.length;--n;)r=~~(c()*(n+1)),e=t[n],t[n]=t[r],t[r]=e}(i),this._microformType){case"card":a={options:h()(t,["type","expirationMonth","expirationYear"]),fields:o};break;case"check":a={options:h()(t,["accountType"]),fields:o};break;default:throw new Error("Unreachable")}for(var u=function(t){f(t)?r(null,t):r(t)},s=0;s<i.length;s+=1)try{return void i[s]("trigger_tokenize",a,u)}catch(t){}r(new e({reason:"CREATE_TOKEN_UNABLE_TO_START",message:"Unable to trigger tokenization."}))}}},{key:"teardown",value:function(){var t=this;Object.keys(this.fields).forEach((function(e){t.fields[e].dispose()})),this.fields={}}}],r&&it(t.prototype,r),n&&it(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}(),st=ct;function ft(t){return ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ft(t)}function lt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pt(n.key),n)}}function pt(t){var e=function(t,e){if("object"!=ft(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=ft(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==ft(e)?e:e+""}var dt=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._config=p(e)},r=[{key:"microform",value:function(t,r){var n="string"!=typeof t;n&&console.warn("Deprecation warning: The microform method now requires a MicroformType as the first argument. Defaulting to 'card'.");var o=n?"card":t,i=n?t:r;if(!1===this._config.microformTypes.has(o))throw function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return new e({reason:"MICROFORM_INVALID_TYPE",message:'Invalid Microform type "'.concat(t,'". Supported values are [ ').concat(r.join(", ")," ]."),details:{message:"Supported values are [ ".concat(r.join(", ")," ].")}})}(o,Array.from(this._config.microformTypes));return new st(this._config,o,i)}}],r&&lt(t.prototype,r),n&&lt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}()}(),n}()}));